{"ast":null,"code":"import { computed, watch } from '@vue/runtime-core';\nimport { get } from 'js-cookie';\nimport Cookies from 'js-cookie';\nimport { mapGetters } from \"vuex\";\nimport sweetalert2 from 'sweetalert2';\nimport Swal from 'sweetalert2';\nimport 'sweetalert2/dist/sweetalert2.min.css';\nexport default {\n  name: 'update',\n\n  data() {\n    return {\n      DateConsult: \"\",\n      Horaire: \"\",\n      TypeConsult: \"\",\n      Reference: Cookies.get('user'),\n      UpdateData: [],\n      Appointments: [],\n      date_sys: new Date().toISOString().slice(0, 10),\n      heures: [{\n        \"value\": \"08:00:00\",\n        \"status\": true\n      }, {\n        \"value\": \"09:00:00\",\n        \"status\": true\n      }, {\n        \"value\": \"10:00:00\",\n        \"status\": true\n      }, {\n        \"value\": \"11:00:00\",\n        \"status\": true\n      }, {\n        \"value\": \"14:00:00\",\n        \"status\": true\n      }, {\n        \"value\": \"15:00:00\",\n        \"status\": true\n      }, {\n        \"value\": \"16:00:00\",\n        \"status\": true\n      }, {\n        \"value\": \"17:00:00\",\n        \"status\": true\n      }]\n    };\n  },\n\n  methods: {\n    HandlDate() {\n      this.ShowHoraire = true;\n      fetch(\"http://localhost/doctor/Appointments/findAppointment/\" + this.DateConsult).then(response => response.json()).then(data => {\n        console.log(data);\n\n        if (data[1] === 'error') {\n          console.log(this.heures);\n        } else if (data[0] === 'success') {\n          //  alert(\"vous avez déja un rendez-vous a cette date\");\n          console.log(data[1][0].Horaire);\n          console.log(this.heures[0].value);\n          console.log(this.heures[0].value == data[1][0].Horaire);\n\n          for (var i = 0; i < this.heures.length; i++) {\n            for (var j = 0; j < data[1].length; j++) {\n              if (this.heures[i].value == data[1][j].Horaire) {\n                this.heures[i].status = false;\n                console.log(this.heures[i].status);\n              }\n            }\n          }\n        }\n      });\n    },\n\n    HandlHoraire() {// console.log(\"horaire\",this.Horaire);\n    },\n\n    UpdateAppointment() {\n      const Appointment = {\n        DateConsult: this.DateConsult,\n        Horaire: this.Horaire,\n        sujet: this.TypeConsult,\n        Reference: Cookies.get('user')\n      };\n      console.log(Appointment);\n      console.log(this.$route.params.id);\n      fetch('http://localhost/doctor/Appointments/update/' + this.$route.params.id, {\n        method: 'UPDATE',\n        headers: {\n          'Content-Type': 'application/json',\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: JSON.stringify(Appointment)\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n\n        if (data === 'success') {\n          alert(\"Votre rendez-vous a été modifié avec succès\");\n          this.$router.push('/allappointment');\n        }\n      });\n    } //ajouter un rendez voous par reference:\n\n\n  },\n  computed: { ...mapGetters(['Appointment'])\n  },\n\n  mounted() {\n    console.log('hada howa id', this.$route.params.id);\n    fetch(\"http://localhost/doctor/Appointments/find/\" + this.$route.params.id).then(response => response.json()).then(data => {\n      this.DateConsult = data[1].DateConsult;\n      this.Horaire = data[1].Horaire;\n      this.TypeConsult = data[1].sujet;\n      console.log(this.DateConsult);\n    }).then(() => {});\n  }\n\n};","map":{"version":3,"mappings":"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","names":["computed","watch","get","Cookies","mapGetters","sweetalert2","Swal","name","data","DateConsult","Horaire","TypeConsult","Reference","UpdateData","Appointments","date_sys","Date","toISOString","slice","heures","methods","HandlDate","ShowHoraire","fetch","then","response","json","console","log","value","i","length","j","status","HandlHoraire","UpdateAppointment","Appointment","sujet","$route","params","id","method","headers","body","JSON","stringify","alert","$router","push","mounted"],"sourceRoot":"","sources":["C:\\Users\\MR\\Desktop\\DentalManagement\\vueprojet\\doctor\\src\\components\\Update.vue"],"sourcesContent":["<template>\r\n     <div class=\"general\">\r\n\r\n</div>\r\n   <div class=\"ctn \">\r\n      <div class=\"flex items-center sin mt-20\">\r\n      <div  class=\"flex-1 h-full max-w-4xl mx-auto bg-white  \">\r\n <div v-if =\"failed\" class=\"p-5 text-sm text-red-700 bg-red-100  dark:bg-red-200 dark:text-red-800\" role=\"alert\">\r\n  <span class=\"font-medium\">Danger</span> Change a few things up and try submitting again.\r\n</div>\r\n        \r\n  <div class=\"flex flex-col md:flex-row\">\r\n    \r\n          <div class=\"h-32 md:h-auto md:w-1/2\">\r\n            <img\r\n              class=\"object-cover w-full h-full\"\r\n              src=\"../assets/imgs/reg.png\"\r\n              alt=\"img\"\r\n            />\r\n          </div>\r\n          <div class=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\r\n            <div class=\"w-full\">\r\n              <div class=\"flex justify-center mb-20\">\r\n                <div class=\"relative md:mt-8\">\r\n                  <a\r\n                    href=\"#\"\r\n                    class=\"text-lg relative z-50 font-bold tracking-widest text-gray-900 rounded-lg focus:outline-none focus:shadow-outline\"\r\n                    >Dr.Ibnahmad</a\r\n                  >\r\n                  <svg\r\n                    class=\"h-11 z-40 absolute -top-2 -left-3\"\r\n                    viewBox=\"0 0 79 79\"\r\n                    fill=\"none\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M35.2574 2.24264C37.6005 -0.100501 41.3995 -0.100505 43.7426 2.24264L76.7574 35.2574C79.1005 37.6005 79.1005 41.3995 76.7574 43.7426L43.7426 76.7574C41.3995 79.1005 37.6005 79.1005 35.2574 76.7574L2.24264 43.7426C-0.100501 41.3995 -0.100505 37.6005 2.24264 35.2574L35.2574 2.24264Z\"\r\n                      fill=\"#65DAFF\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n              <form>\r\n                <h1 class=\"mb-4 text-2xl font-bold text-center text-gray-700\">\r\n                 Add an appointment\r\n                </h1>\r\n                <div>\r\n                  <label class=\"block text-sm\"> Day </label>\r\n                  <input\r\n                \r\n                    @change=\"HandlDate\"  v-model=\"DateConsult\"  :min=\"date_sys\"\r\n                    type=\"date\"\r\n                    class=\"w-full px-4 py-2 text-sm border rounded-md focus:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-600\"\r\n                    placeholder=\"Name\"\r\n                  />\r\n                </div>\r\n                <div  class=\"mt-4\">\r\n                  <label class=\"block text-sm\"> Horaire </label>\r\n               \r\n                  <select \r\n                   @change=\"HandlHoraire\"  v-model=\"Horaire\"\r\n\r\n                  class=\"w-full px-4 py-2 text-sm border rounded-md focus:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-600\"\r\n>\r\n                    <option v-for=\"heure in heures\" :key=\"heure.value\" :disabled=\"!heure.status\">{{heure.value}}</option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"mt-4\">\r\n                  <label class=\"block text-sm\"> sujet </label>\r\n                 \r\n                  <textarea\r\n                    v-model=\"TypeConsult\"\r\n                    class=\"w-full px-4 py-2 text-sm border rounded-md focus:border-blue-400 focus:outline-none focus:ring-1 focus:ring-blue-600\"\r\n\r\n                  \r\n                  > \r\n\r\n\r\n                  </textarea>\r\n                </div>\r\n              \r\n                \r\n                <input type=\"submit\" value=\"Book now\" @click.prevent=\"UpdateAppointment\" class=\"block w-full px-4 py-2 mt-4 text-sm font-medium leading-5 text-center text-white transition-colors duration-150 bg-blue-600 border border-transparent rounded-lg active:bg-blue-600 hover:bg-blue-700 focus:outline-none focus:shadow-outline-blue\"\r\n/>\r\n<!-- {{failed}} -->\r\n\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n\r\n\r\n</div>\r\n\r\n</template>\r\n\r\n\r\n<script>\r\nimport { computed, watch } from '@vue/runtime-core'\r\nimport { get } from 'js-cookie';\r\nimport  Cookies from 'js-cookie'\r\nimport { mapGetters} from \"vuex\";\r\nimport sweetalert2 from 'sweetalert2';\r\nimport Swal from 'sweetalert2'\r\nimport 'sweetalert2/dist/sweetalert2.min.css';\r\nexport default {\r\n    name:'update',\r\n   data() {\r\n    return {\r\n      DateConsult: \"\",\r\n      Horaire :\"\",\r\n      TypeConsult: \"\",\r\n      Reference:Cookies.get('user'),\r\n      UpdateData: [],\r\n      \r\n      \r\n      \r\n      Appointments:[\r\n      ],\r\n      date_sys : new Date().toISOString().slice(0,10),\r\n      heures:[\r\n        {\r\n          \"value\" : \"08:00:00\",\r\n          \"status\" : true\r\n        },\r\n        {\r\n          \"value\" : \"09:00:00\",\r\n          \"status\" : true\r\n        },\r\n        {\r\n          \"value\" : \"10:00:00\",\r\n          \"status\" : true\r\n        },\r\n        {\r\n          \"value\" : \"11:00:00\",\r\n          \"status\" : true\r\n        },\r\n        {\r\n          \"value\" : \"14:00:00\",\r\n          \"status\" : true\r\n        },\r\n        {\r\n          \"value\" : \"15:00:00\",\r\n          \"status\" : true\r\n        },\r\n        {\r\n          \"value\" : \"16:00:00\",\r\n          \"status\" : true\r\n        },\r\n        {\r\n          \"value\" : \"17:00:00\",\r\n          \"status\" : true\r\n        }\r\n      ]\r\n    \r\n    };\r\n  },\r\nmethods:{\r\n \r\n    HandlDate() {\r\n      this.ShowHoraire = true;\r\n      fetch(\r\n        \"http://localhost/doctor/Appointments/findAppointment/\" +this.DateConsult)\r\n        .then((response) => response.json())\r\n        .then(data => {\r\n        console.log(data);\r\n        if (data[1] === 'error') {\r\n          console.log(this.heures);\r\n        }\r\n        else if (data[0] === 'success'){\r\n        //  alert(\"vous avez déja un rendez-vous a cette date\");\r\n          console.log(data[1][0].Horaire);\r\n          console.log(this.heures[0].value);\r\n          console.log(this.heures[0].value==data[1][0].Horaire);\r\n          for (var i = 0; i <this.heures.length; i++) {\r\n            for (var j = 0; j <data[1].length;j++) {\r\n               if (this.heures[i].value == data[1][j].Horaire) {\r\n              this.heures[i].status = false;\r\n              console.log(this.heures[i].status);\r\n            }\r\n            }\r\n           \r\n          }\r\n        }\r\n       \r\n       \r\n        });\r\n        \r\n    },\r\n    HandlHoraire () {\r\n      // console.log(\"horaire\",this.Horaire);\r\n    },\r\nUpdateAppointment(){\r\n  const Appointment = {\r\n    DateConsult: this.DateConsult,\r\n    Horaire: this.Horaire,\r\n    sujet: this.TypeConsult,\r\n    Reference: Cookies.get('user'),\r\n   \r\n  };\r\n  console.log(Appointment);\r\n  console.log(this.$route.params.id);\r\n \r\n  fetch('http://localhost/doctor/Appointments/update/'+this.$route.params.id, {\r\n    method: 'UPDATE',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Content-Type': 'application/x-www-form-urlencoded',\r\n     \r\n    },\r\n    body: JSON.stringify(Appointment),\r\n  }).then(response => response.json())\r\n    .then(data => {\r\n      console.log(data);\r\n      if (data === 'success'){\r\n        alert(\"Votre rendez-vous a été modifié avec succès\");\r\n        this.$router.push('/allappointment');\r\n      }\r\n    })\r\n}\r\n  //ajouter un rendez voous par reference:\r\n},\r\n    computed: {\r\n      ...mapGetters(['Appointment']),\r\n    },\r\n    mounted() {\r\n        \r\n        console.log('hada howa id',this.$route.params.id);\r\n        \r\n        fetch(\"http://localhost/doctor/Appointments/find/\"+this.$route.params.id)\r\n        .then(response => response.json())\r\n        .then(data =>\r\n        {\r\n        \r\n          this.DateConsult = data[1].DateConsult;\r\n          this.Horaire = data[1].Horaire;\r\n          this.TypeConsult = data[1].sujet;\r\n          console.log(this.DateConsult);\r\n        }).then(()=>{\r\n      \r\n         \r\n          \r\n        });\r\n     \r\n     \r\n      \r\n    }\r\n \r\n    \r\n    \r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}