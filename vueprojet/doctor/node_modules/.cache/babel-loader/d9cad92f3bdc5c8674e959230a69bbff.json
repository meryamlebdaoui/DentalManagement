{"ast":null,"code":"import { computed, watch } from \"@vue/runtime-core\";\nimport { get } from \"js-cookie\";\nimport Cookies from \"js-cookie\";\nimport { mapGetters } from \"vuex\";\nimport sweetalert2 from \"sweetalert2\";\nimport Swal from \"sweetalert2\";\nimport \"sweetalert2/dist/sweetalert2.min.css\";\nexport default {\n  name: \"addrendezvous\",\n\n  data() {\n    return {\n      DateConsult: \"\",\n      Horaire: \"\",\n      TypeConsult: \"\",\n      Reference: Cookies.get(\"user\"),\n      heuresapi: [],\n      Appointments: [],\n      ShowHoraire: false,\n      date_sys: new Date().toISOString().slice(0, 10),\n      heures: [{\n        value: \"08:00:00\",\n        status: true\n      }, {\n        value: \"09:00:00\",\n        status: true\n      }, {\n        value: \"10:00:00\",\n        status: true\n      }, {\n        value: \"11:00:00\",\n        status: true\n      }, {\n        value: \"14:00:00\",\n        status: true\n      }, {\n        value: \"15:00:00\",\n        status: true\n      }, {\n        value: \"16:00:00\",\n        status: true\n      }, {\n        value: \"17:00:00\",\n        status: true\n      }]\n    };\n  },\n\n  methods: {\n    HandlDate() {\n      this.ShowHoraire = true;\n      fetch(\"http://localhost/doctor/Appointments/findAppointment/\" + this.DateConsult).then(response => response.json()).then(data => {\n        console.log(data);\n\n        if (data[1] === 'error') {\n          console.log(this.heures);\n        } else if (data[0] === 'success') {\n          //  alert(\"vous avez déja un rendez-vous a cette date\");\n          console.log(data[1][0].Horaire);\n          console.log(this.heures[0].value);\n          console.log(this.heures[0].value == data[1][0].Horaire);\n\n          for (var i = 0; i < this.heures.length; i++) {\n            for (var j = 0; j < data[1].length; j++) {\n              if (this.heures[i].value == data[1][j].Horaire) {\n                this.heures[i].status = false;\n                console.log(this.heures[i].status);\n              }\n            }\n          }\n        }\n      });\n    },\n\n    addrendezvous() {\n      const Appointments = {\n        DateConsult: this.DateConsult,\n        Horaire: this.Horaire,\n        sujet: this.TypeConsult,\n        Reference: this.Reference\n      };\n      console.log(Appointments);\n      console.log(Appointments);\n      fetch(\"http://localhost/doctor/Appointments/create\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(Appointments)\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n        alert(\"rendez vous ajouté avec succès\");\n        this.$router.push(\"/'Allappointments\");\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["computed","watch","get","Cookies","mapGetters","sweetalert2","Swal","name","data","DateConsult","Horaire","TypeConsult","Reference","heuresapi","Appointments","ShowHoraire","date_sys","Date","toISOString","slice","heures","value","status","methods","HandlDate","fetch","then","response","json","console","log","i","length","j","addrendezvous","sujet","method","headers","body","JSON","stringify","alert","$router","push"],"sourceRoot":"","sources":["C:\\Users\\MR\\Desktop\\DentalManagement\\vueprojet\\doctor\\src\\views\\Appointment\\AppointmentView.vue"],"sourcesContent":["<template>\r\n  <div class=\"general\"></div>\r\n  <div class=\"ctn\">\r\n    <div class=\"flex items-center sin mt-20\">\r\n      <div class=\"flex-1 h-full max-w-4xl mx-auto bg-white\">\r\n        <div\r\n          v-if=\"failed\"\r\n          class=\"\r\n            p-5\r\n            text-sm text-red-700\r\n            bg-red-100\r\n            dark:bg-red-200 dark:text-red-800\r\n          \"\r\n          role=\"alert\"\r\n        >\r\n          <span class=\"font-medium\">Danger</span> Change a few things up and try\r\n          submitting again.\r\n        </div>\r\n\r\n        <div class=\"flex flex-col md:flex-row\">\r\n          <div class=\"h-32 md:h-auto md:w-1/2\">\r\n            <img\r\n              class=\"object-cover w-full h-full\"\r\n              src=\"../../assets/imgs/app.png\"\r\n              alt=\"img\"\r\n            />\r\n          </div>\r\n          <div class=\"flex items-center justify-center p-6 sm:p-12 md:w-1/2\">\r\n            <div class=\"w-full\">\r\n              <div class=\"flex justify-center mb-20\">\r\n                <div class=\"relative md:mt-8\">\r\n                  <a\r\n                    href=\"#\"\r\n                    class=\"\r\n                      text-lg\r\n                      relative\r\n                      z-50\r\n                      font-bold\r\n                      tracking-widest\r\n                      text-gray-900\r\n                      rounded-lg\r\n                      focus:outline-none focus:shadow-outline\r\n                    \"\r\n                    >Dr.Dental</a\r\n                  >\r\n                  <svg\r\n                    class=\"h-11 z-40 absolute -top-2 -left-3\"\r\n                    viewBox=\"0 0 79 79\"\r\n                    fill=\"none\"\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                  >\r\n                    <path\r\n                      d=\"M35.2574 2.24264C37.6005 -0.100501 41.3995 -0.100505 43.7426 2.24264L76.7574 35.2574C79.1005 37.6005 79.1005 41.3995 76.7574 43.7426L43.7426 76.7574C41.3995 79.1005 37.6005 79.1005 35.2574 76.7574L2.24264 43.7426C-0.100501 41.3995 -0.100505 37.6005 2.24264 35.2574L35.2574 2.24264Z\"\r\n                      fill=\"#65DAFF\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n              </div>\r\n              <form>\r\n                <h1 class=\"mb-4 text-2xl font-bold text-center text-gray-700\">\r\n                  Add an appointment\r\n                </h1>\r\n                <div>\r\n                  <label class=\"block text-sm\"> Day </label>\r\n                  <input\r\n                    @change=\"HandlDate\"\r\n                    v-model=\"DateConsult\"\r\n                    :min=\"date_sys\"\r\n                    type=\"date\"\r\n                    class=\"\r\n                      w-full\r\n                      px-4\r\n                      py-2\r\n                      text-sm\r\n                      border\r\n                      rounded-md\r\n                      focus:border-blue-400\r\n                      focus:outline-none\r\n                      focus:ring-1\r\n                      focus:ring-blue-600\r\n                    \"\r\n                    placeholder=\"Name\"\r\n                  />\r\n                </div>\r\n                <div v-if=\"ShowHoraire\" class=\"mt-4\">\r\n                  <label class=\"block text-sm\"> Time </label>\r\n\r\n                  <select\r\n                    @change=\"HandlHoraire\"\r\n                    v-model=\"Horaire\"\r\n                    class=\"\r\n                      w-full\r\n                      px-4\r\n                      py-2\r\n                      text-sm\r\n                      border\r\n                      rounded-md\r\n                      focus:border-blue-400\r\n                      focus:outline-none\r\n                      focus:ring-1\r\n                      focus:ring-blue-600\r\n                    \"\r\n                  >\r\n                    <option\r\n                      v-for=\"heure in heures\"\r\n                      :key=\"heure.value\"\r\n                      :disabled=\"!heure.status\"\r\n                    >\r\n                      {{ heure.value }}\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n                <div class=\"mt-4\">\r\n                  <label class=\"block text-sm\"> Description </label>\r\n\r\n                  <textarea\r\n                    v-model=\"TypeConsult\"\r\n                    class=\"\r\n                      w-full\r\n                      px-4\r\n                      py-2\r\n                      text-sm\r\n                      border\r\n                      rounded-md\r\n                      focus:border-blue-400\r\n                      focus:outline-none\r\n                      focus:ring-1\r\n                      focus:ring-blue-600\r\n                    \"\r\n                  >\r\n                  </textarea>\r\n                </div>\r\n\r\n                <input\r\n                  type=\"submit\"\r\n                  value=\"Book now\"\r\n                  @click.prevent=\"addrendezvous\"\r\n                  class=\"\r\n                    block\r\n                    w-full\r\n                    px-4\r\n                    py-2\r\n                    mt-4\r\n                    text-sm\r\n                    font-medium\r\n                    leading-5\r\n                    text-center text-white\r\n                    transition-colors\r\n                    duration-150\r\n                    bg-blue-600\r\n                    border border-transparent\r\n                    rounded-lg\r\n                    active:bg-blue-600\r\n                    hover:bg-blue-700\r\n                    focus:outline-none focus:shadow-outline-blue\r\n                  \"\r\n                />\r\n                <!-- {{failed}} -->\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { computed, watch } from \"@vue/runtime-core\";\r\nimport { get } from \"js-cookie\";\r\nimport Cookies from \"js-cookie\";\r\nimport { mapGetters } from \"vuex\";\r\n\r\nimport sweetalert2 from \"sweetalert2\";\r\nimport Swal from \"sweetalert2\";\r\nimport \"sweetalert2/dist/sweetalert2.min.css\";\r\n\r\nexport default {\r\n  name: \"addrendezvous\",\r\n  data() {\r\n    return {\r\n      DateConsult: \"\",\r\n      Horaire: \"\",\r\n      TypeConsult: \"\",\r\n      Reference: Cookies.get(\"user\"),\r\n      heuresapi: [],\r\n      Appointments: [],\r\n      ShowHoraire: false,\r\n      date_sys: new Date().toISOString().slice(0, 10),\r\n      heures: [\r\n        {\r\n          value: \"08:00:00\",\r\n          status: true,\r\n        },\r\n        {\r\n          value: \"09:00:00\",\r\n          status: true,\r\n        },\r\n        {\r\n          value: \"10:00:00\",\r\n          status: true,\r\n        },\r\n        {\r\n          value: \"11:00:00\",\r\n          status: true,\r\n        },\r\n        {\r\n          value: \"14:00:00\",\r\n          status: true,\r\n        },\r\n        {\r\n          value: \"15:00:00\",\r\n          status: true,\r\n        },\r\n        {\r\n          value: \"16:00:00\",\r\n          status: true,\r\n        },\r\n        {\r\n          value: \"17:00:00\",\r\n          status: true,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  methods: {\r\n    HandlDate() {\r\n      this.ShowHoraire = true;\r\n      fetch(\r\n        \"http://localhost/doctor/Appointments/findAppointment/\" +this.DateConsult)\r\n        .then((response) => response.json())\r\n        .then(data => {\r\n        console.log(data);\r\n        if (data[1] === 'error') {\r\n          console.log(this.heures);\r\n        }\r\n        else if (data[0] === 'success'){\r\n        //  alert(\"vous avez déja un rendez-vous a cette date\");\r\n          console.log(data[1][0].Horaire);\r\n          console.log(this.heures[0].value);\r\n          console.log(this.heures[0].value==data[1][0].Horaire);\r\n          for (var i = 0; i <this.heures.length; i++) {\r\n            for (var j = 0; j <data[1].length;j++) {\r\n               if (this.heures[i].value == data[1][j].Horaire) {\r\n              this.heures[i].status = false;\r\n              console.log(this.heures[i].status);\r\n            }\r\n            }\r\n           \r\n          }\r\n        }\r\n       \r\n       \r\n        });\r\n    },\r\n    addrendezvous()\r\n    {\r\n     const Appointments =\r\n     {\r\n        DateConsult: this.DateConsult,\r\n        Horaire: this.Horaire,\r\n        sujet: this.TypeConsult,\r\n        Reference: this.Reference,\r\n     }\r\n     console.log(Appointments);\r\n     console.log(Appointments);\r\n     fetch(\"http://localhost/doctor/Appointments/create\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(Appointments),\r\n    }).then(response => response.json())\r\n    .then(data => {\r\n      console.log(data);\r\n      alert(\"rendez vous ajouté avec succès\");\r\n      this.$router.push(\"/'Allappointments\");\r\n\r\n    });\r\n    },\r\n  },\r\n};\r\n</script>"]},"metadata":{},"sourceType":"module"}